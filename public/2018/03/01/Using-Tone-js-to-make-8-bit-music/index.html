<!DOCTYPE html>
<html>

<head>
  <meta http-equiv="Content-Type" content="text/html" charset="UTF-8" >
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
  <title>Using Tone.js to make 8 bit music | DY-L</title>
  <meta name="description" content="" />
  <meta name="HandheldFriendly" content="True" />
  <meta name="MobileOptimized" content="320" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <link rel="stylesheet" type="text/css" href="/css/screen.css" />
  <link rel="stylesheet" type="text/css" href="//fonts.googleapis.com/css?family=Noto+Serif:400,700,400italic|Open+Sans:700,400" />

  <meta name="generator" content="DY-L">

  
  
  

  
</head>


<body class="post-template">

  <header class="site-head" style="background-image: url(https://camo.githubusercontent.com/90f319acd1b2e9284745d850013bb75cb7c4fb77/68747470733a2f2f692e726564642e69742f3867666c7235777a6d336f30312e6a7067)">
    <div class="vertical">
        <div class="site-head-content inner">
             <a class="blog-logo" href="/"><img src="https://raw.githubusercontent.com/dyllanwli/Solution/master/image/16729593.png" alt="Blog Logo"></a> 
            <h1 class="blog-title">DY-L</h1>
            <h2 class="blog-description"></h2>
        </div>
    </div>
</header>
  

<main class="content" role="main">
  <article class="post">
    <span class="post-meta">
      <time datetime="2018-03-01T02:31:08.000Z" itemprop="datePublished">
          2018-03-01
      </time>
    
</span>
    <h1 class="post-title">Using Tone.js to make 8 bit music</h1>
    <section class="post-content">
      <h2 id="What-is-8-bit-music"><a href="#What-is-8-bit-music" class="headerlink" title="What is 8 bit music"></a>What is 8 bit music</h2><p>8 bit music is also called chip music.</p>
<p>At that time, only small memory can be installed in game console （e.g. FC). Producer cannot make high sampling-rate PCM music. But music is necessary when we play games. One solution is making music real time, which the played music can quickly clean the used memory and rebuild the next note. </p>
<p>When making 8 bit music, we should storage the basic sound into the device priority. In the game music, we also needs to upload our music code (like the score) into the program. In this way we can make a game music, which become more popular in nowdays and gradually forming a new style on electricity music genre.</p>
<h2 id="How-to-make-8-bit-mudic"><a href="#How-to-make-8-bit-mudic" class="headerlink" title="How to make 8 bit mudic"></a>How to make 8 bit mudic</h2><p>We use FC (Family Computer) as an example to explain 8 bit music. In the music system of FC, instrument is not exist. It only provided different waves to producer. When composing, people needs to transform different waves into different audio effect.</p>
<p>5 tracks in FC:</p>
<ol>
<li>square wave (2 track)</li>
</ol>
<p><img src="../_image/Using-Tone-js-to-make-8-bit-music/square-wave.jpg" alt=""></p>
<p>Square wave occupy two track, since it has variable proportions waves. Thus the wave generate different tone. Piano, guitar and other instrument can be simulated by this wave.  </p>
<ol start="2">
<li>triangular wave (1 track)</li>
</ol>
<p><img src="../_image/Using-Tone-js-to-make-8-bit-music/triangular-wave.jpg" alt=""></p>
<p>sometime we use this wave to simulate bass</p>
<ol start="3">
<li>noise (1 track)</li>
</ol>
<p>Noise is the most common audio effect in games. We use noise to create the environment sound, like explode, footstep, crash and the rhythmic tapping.</p>
<ol start="4">
<li>Sampling (1 track)</li>
</ol>
<p>Sampling track is more complex than other. We don’t need to dig it all up. </p>
<h4 id="Note-How-to-modify-a-note"><a href="#Note-How-to-modify-a-note" class="headerlink" title="Note: How to modify a note"></a>Note: How to modify a note</h4><p>Usually, we use volumn, trill or envelope (ADSR) to polish the sound. </p>
<h2 id="Web-Audio"><a href="#Web-Audio" class="headerlink" title="Web Audio"></a>Web Audio</h2><p>Here is a <a href="https://codepen.io/anon/embed/LxJEaj?slug-hash=LxJEaj&amp;default-tab=result&amp;height=300&amp;theme-id=0&amp;embed-version=2&amp;user=anon" target="_blank" rel="noopener">website</a> to exhibit web audio: </p>
<p>However, you may notice that FC didn’t provide sin wave. Because sin/cos wave is published after the game console. It is more soft than normal FC sound. </p>
<p>Tone.js is open source web audio SDK for developer make music using JS. We choose Tong.js because:</p>
<ul>
<li>Tone.js accepted we edit pitch rather than ask us play 440Hz sound. For example, it packaged the scale into the library, we don’t need to play a sound which exactly is 440Hz.</li>
<li>It packaged Attack and Release in ADSR (Attack, Decay, Sustain, Release). More convenience to develop </li>
</ul>
<h2 id="Steps"><a href="#Steps" class="headerlink" title="Steps"></a>Steps</h2><ol>
<li><p>Essential functon in Tone.js for sounding.</p>
<p> .triggerAttackRelease()</p>
</li>
</ol>
<p>It including four parameter: note, duration, time and velocity.</p>
<p>Time is related to duration which represent the position of the note in a song; velocity is a detail change, sometime 8 bit music left this parameter unchanged.</p>
<p>The code below is a example to show how we use these four parameter to make music.</p>
<pre><code>var synth = new Tone.Synth().toMaster()
synth.triggerAttackRelease(&apos;C4&apos;, &apos;4n&apos;, &apos;8n&apos;, 1)
synth.triggerAttackRelease(&apos;E4&apos;, &apos;8n&apos;, &apos;4n + 8n&apos;, 1)
</code></pre><p>In this snippets, C4 and E4 represent the frequent of the sound. Time is accumulate and velocity is fixed. </p>
<p>How about we use code to write one bar?</p>
<pre><code>var synth = new Tone.Synth().toMaster()
Tone.Transport.bpm.value = 120

synth.triggerAttackRelease(&apos;E4&apos;, &apos;4n&apos;, &apos;0&apos;, 1)
synth.triggerAttackRelease(&apos;E4&apos;, &apos;4n&apos;, &apos;4n&apos;, 1)
synth.triggerAttackRelease(&apos;F4&apos;, &apos;4n&apos;, &apos;2n&apos;, 1)
synth.triggerAttackRelease(&apos;G4&apos;, &apos;4n&apos;, &apos;2n+4n&apos;, 1)
</code></pre><ol start="2">
<li>Using harmony</li>
</ol>
<p>What is the harmony? It is two or more sound play together, following some rules. We can use different note at the same time to composite a new harmony. </p>
<p>After finished the single track editing, we need to add more instruments.</p>
<pre><code>var triangleOptions = {
oscillator: {
    type: &apos;triangle&apos;
}
}

var squareOptions = {
oscillator: {
    type: &apos;square&apos;
}
}

var squareSynth = new Tone.Synth(squareOptions).toMaster()

var triangleSynth = new Tone.Synth(triangleOptions).toMaster()

var noiseSynth = new Tone.NoiseSynth().toMaster()
</code></pre><p>Each tone has different wave, which represent different instruments. <code>squareSynth</code> is used to play main melody instruments, such as piano, guitar. <code>trangleSynth</code> is used to simulate bass. <code>noiseSynth</code> is used to smulate percussion music。</p>
<ol start="3">
<li>Audio effect</li>
</ol>
<p>Last step we should add audio effect to make music more rich. Like I mentioned before, ADSR can create some reverberation, echo and differnet pitch. These can be achieved by <code>Tone.Envelope()</code>.</p>
<p><img src="../_image/Using-Tone-js-to-make-8-bit-music/ADSR.jpg" alt=""></p>
<p>Here is the code:</p>
<pre><code>envelope: {
attack  : 0.01 ,
decay  : 0.1 ,
sustain  : 0.5 ,
release  : 1 ,
attackCurve  : linear ,
releaseCurve  : exponential
}
</code></pre><h2 id="Consolution"><a href="#Consolution" class="headerlink" title="Consolution"></a>Consolution</h2><p>Pretty easy aha, I think the next generation of music must be computer music. </p>

    </section>
    <footer class="post-footer">
      <section class="author">
    <h4>DY-L</h4>
    <p>专业做梦,业余写写代码弹弹琴做点东西</p>
</section>
      <section class="share">
    <h4>Share this post</h4>
    <a class="icon-twitter" href="http://twitter.com/share?url=https://dyllanwli.github.io/2018/03/01/Using-Tone-js-to-make-8-bit-music/" onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
        <span class="hidden">Twitter</span>
    </a>
    <a class="icon-facebook" href="https://www.facebook.com/sharer/sharer.php?u=https://dyllanwli.github.io/2018/03/01/Using-Tone-js-to-make-8-bit-music/" onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;">
        <span class="hidden">Facebook</span>
    </a>
    <a class="icon-google-plus" href="https://plus.google.com/share?url=https://dyllanwli.github.io/2018/03/01/Using-Tone-js-to-make-8-bit-music/" onclick="window.open(this.href, 'google-plus-share', 'width=490,height=530');return false;">
        <span class="hidden">Google+</span>
    </a>
</section>
    </footer>
  </article>
  <nav class="pagination" role="pagination">
    
    <a class="newer-posts" href="/2018/03/11/Let-your-VPS-be-useful/">
        ← Let your VPS be useful
    </a>
    
    <span class="page-number">•</span>
    
    <a class="older-posts" href="/2018/02/10/hyperledger-project/">
        Different between 5 Hyperleder project →
    </a>
    
</nav>
  <div id="comment" class="comments-area">
    <h1 class="title"><a href="#disqus_comments" name="disqus_comments">Comments</a></h1>

    
    <div id="disqus_thread">
        <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    </div>
    
</div>
</main>


  
<footer class="site-footer">
  
  <div class="inner">
     <section class="copyright">All content copyright <a href="/">DY-L</a> &copy; 2014 &bull; All rights reserved.</section>
     <section class="poweredby">Proudly published with <a class="icon-ghost" href="http://zespia.tw/hexo/">Hexo</a></section>
  </div>
</footer>

  <script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>

<script type="text/javascript" src="/js/jquery.fitvids.js"></script>
<script type="text/javascript" src="/js/index.js"></script>



<script type="text/javascript">
    var disqus_shortname = 'dyllanwli';

    (function(){
        var dsq = document.createElement('script');
        dsq.type = 'text/javascript';
        dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>




</body>
</html>
